default_platform :ios

platform :ios do
  before_all do
    setup_circle_ci
  end

  lane :build_for_ui_test do
    scan(
      destination: "name=iPhone 13,OS=15.5",
      workspace: "AmazingSeries.xcworkspace",
      devices: ["iPhone 13 (15.5)"],
      scheme: "AmazingSeriesUITests",
      derived_data_path: "build",
      build_for_testing: true
   )
  end

  lane :ui_test_1 do |options|
    scan(
      destination: "name=iPhone 13,OS=15.5",
      scheme: "AmazingSeriesUITests",
      devices: ["iPhone 13 (15.5)"],
      derived_data_path: "build",
      test_without_building: true,
      only_testing: ["AmazingSeriesUITests"]
    )
  end

  lane :ui_test_2 do |options|
    scan(
      destination: "name=iPhone 13,OS=15.5",
      scheme: "AmazingSeriesUITests",
      devices: ["iPhone 13 (15.5)"],
      derived_data_path: "build",
      test_without_building: true,
      only_testing: ["AmazingSeriesUITests2"]
    )
  end

  lane :ui_test_3 do |options|
    scan(
      destination: "name=iPhone 13,OS=15.5",
      scheme: "AmazingSeriesUITests",
      devices: ["iPhone 13 (15.5)"],
      derived_data_path: "build",
      test_without_building: true,
      only_testing: ["AmazingSeriesUITests3"]
    )
  end

  lane :ui_test_4 do |options|
    scan(
      destination: "name=iPhone 13,OS=15.5",
      scheme: "AmazingSeriesUITests",
      devices: ["iPhone 13 (15.5)"],
      derived_data_path: "build",
      test_without_building: true,
      only_testing: ["AmazingSeriesUITests4"]
    )
  end

end